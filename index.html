<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>꽃미남 안전불감증: 리턴 투 라이프</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .vignette-overlay { background: linear-gradient(to bottom, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0) 25%, rgba(0,0,0,0) 60%, rgba(0,0,0,0.9) 100%); }
        .game-text-shadow { text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9); }
        .choice-button { transition: all 0.2s ease; background-color: rgba(17, 24, 39, 0.7); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .choice-button:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); background-color: rgba(31, 41, 55, 0.9); }
        .nav-button { transition: background-color 0.2s ease; } .nav-button:hover { background-color: rgba(255, 255, 255, 0.2); }
        .fade-in { animation: fadeIn 0.5s ease-in-out; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-black text-white">
    <div id="game-container" class="relative w-full h-screen overflow-hidden"></div>
<script>
    const storyData = {
  "title": "꽃미남 안전불감증: 리턴 투 라이프",
  "setting": "대한민국 건설 현장. 안전 불감증이 만연한 현실 속에서 벌어지는 환생 판타지 로맨스.",
  "synopsis": "베테랑 안전관리자 이정원은 안타까운 사고로 목숨을 잃지만, 눈을 떠보니 아이돌급 외모의 20대 청년으로 환생한다. 이전 생의 기억을 가진 그는, 바뀐 외모와 젊음을 이용해 건설 현장의 안전 불감증을 타파하고 진정한 사랑을 찾아 나선다.",
  "ending": "이정원은 건설 현장의 안전 시스템을 혁신하고, 진실한 사랑을 이루며 이전 생의 못다 이룬 꿈까지 펼쳐나가며 행복한 삶을 살아간다.",
  "characters": [
    {
      "name": "이정원 (강태준)",
      "role": "player",
      "description": "50대 베테랑 안전관리자였으나 꽃미남 20대 강태준으로 환생. 이전 생의 경험을 바탕으로 정의감 넘치고 능글맞은 매력을 발산한다.",
      "status": "정의감에 불타는 행동가"
    },
    {
      "name": "서주희",
      "role": "main",
      "description": "건설 현장 소장의 딸이자 신입 디자이너. 뛰어난 미모와 실력을 겸비했지만, 아버지의 그늘에 가려 자신의 능력을 제대로 발휘하지 못하고 있다.",
      "status": "강태준에 대한 믿음 더욱 굳건해짐"
    },
    {
      "name": "박철민",
      "role": "supporting",
      "description": "악덕 건설사 사장. 안전보다 이윤을 우선시하며, 과거 이정원과 악연이 있다. 강태준의 등장에 불편함을 느끼고 그를 방해하려 한다.",
      "status": "계획 실패, 절망과 분노"
    }
  ],
  "plan": [
    "1장: 추락, 그리고 새로운 시작",
    "2장: 꽃미남 강태준, 건설 현장에 나타나다",
    "3장: 과거의 그림자, 박철민의 등장",
    "4장: 서주희와의 운명적인 만남",
    "5장: 안전 불감증과의 전쟁 선포",
    "6장: 위험 속에서 피어나는 사랑",
    "7장: 숨겨진 진실, 그리고 음모",
    "8장: 태준, 위기를 기회로 만들다"
  ],
  "story": {
    "chapter_0": {
      "title": "1장: 추락, 그리고 새로운 시작",
      "image_prompt": "A young man with idol-like features lies on a hospital bed, sunlight streaming through the window, a mix of confusion and determination in his eyes.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/92ffac30-6011-4c4c-9f1b-5c735db93729/main_story/chapter_0-1753229153004.png",
      "content": [
        "눈을 떴다. 온통 하얀색이었다. 낯선 천장, 낯선 병원 냄새. 그리고… 낯선 얼굴. 거울을 든 간호사가 깜짝 놀라며 뒷걸음질 쳤다. 젠장, 강태준? 이게 대체 어떻게 된 일이야? 마지막 기억은 분명히… 철근 더미에 깔리는 순간이었는데.",
        "몸을 일으키려 했지만 온몸이 쑤셨다. 간호사는 황급히 달려와 나를 진정시켰다. '무리하시면 안 돼요, 강태준 씨. 큰 사고였어요. 기적적으로 살아나신 거예요.' 기적? 그건 맞는 말이다. 이 얼굴, 이 몸. 이건 분명히… 기적이라고밖에 설명할 수 없었다.",
        "며칠 후, 나는 퇴원했다. 어색한 걸음걸이, 낯선 시선. 하지만 동시에… 설렘이 느껴졌다. 젊음, 그리고 새로운 기회. 건설 현장의 안전 불감증을 뿌리 뽑고, 이전 생에서 못다 이룬 꿈을 펼칠 기회가 온 것이다. 하지만 그 전에… 이 '강태준'이라는 인물에 대해 알아야 한다.",
        "강태준의 집으로 향하는 택시 안, 스마트폰을 켰다. 포털 사이트 검색창에 '강태준'을 입력하자 수많은 기사와 사진들이 쏟아져 나왔다. 아이돌 연습생, 잘생긴 외모로 유명세를 탔지만, 잦은 스캔들과 불성실한 태도로 논란을 일으켰다는 내용이었다. 젠장, 시작부터 쉽지 않겠군.",
        "집에 도착하자 예상대로 엉망진창이었다. 술병이 뒹굴고, 옷은 아무렇게나 널브러져 있었다. 한숨을 쉬며 짐을 정리하던 중, 책상 서랍에서 낡은 수첩을 발견했다. 수첩에는 삐뚤빼뚤한 글씨로 무언가가 적혀 있었다. '서주희… 꼭 데뷔시켜야 해…'."
      ],
      "choices": [
        {
          "text": "서주희는 누구지? 수첩의 내용을 더 자세히 살펴본다.",
          "next_node": "chapter_1"
        },
        {
          "text": "일단 집부터 치우고 생각하자. 주변 환경을 정리한다.",
          "next_node": "chapter_1"
        }
      ]
    },
    "chapter_1": {
      "title": "2장: 꽃미남 강태준, 건설 현장에 나타나다",
      "image_prompt": "A handsome young man (formerly a middle-aged construction worker) wearing a hard hat and safety vest stands amidst a bustling construction site, a thoughtful expression on his face.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/92ffac30-6011-4c4c-9f1b-5c735db93729/main_story/chapter_1-1753229170939.png",
      "content": [
        "수첩 속 '서주희'라는 이름이 머릿속에서 떠나지 않았다. 곰곰이 생각해보니, 강태준의 이름 뒤에 따라붙던 스캔들 기사들 속에서 희미하게나마 본 기억이 났다. 한때 유망한 연습생이었지만, 무슨 이유에선지 데뷔가 무산되었다고… 그게 강태준과 무슨 관련이 있는 걸까?",
        "일단, 건설 현장부터 가보기로 했다. 어색한 정장 차림을 벗어던지고, 작업복을 꺼내 입었다. 안전모를 쓰고 거울을 보니, 마치 다른 사람 같았다. 그래, 이 모습이 훨씬 익숙하지. 하지만 이전과는 다르다. 이 얼굴로, 이전의 경험을 살려 안전 불감증을 뿌리 뽑을 거야.",
        "현장에 도착하자, 여기저기서 웅성거리는 소리가 들려왔다. 20대 초반의 꽃미남이 안전모를 쓰고 나타났으니, 당연한 반응이었다. 다들 나를 '강태준'으로 바라보고 있었지만, 나는 '이정원'으로서 해야 할 일을 알고 있었다. 일단, 현장 소장부터 만나봐야겠다.",
        "현장 소장실 문을 열자, 예상대로 박철민 소장이 앉아 있었다. 그는 나를 보더니 눈을 크게 뜨며 당황한 표정을 지었다. \"아니, 강태준 씨? 여긴 어쩐 일로…\"",
        "\"박 소장님, 오랜만이네요.\" 껄렁한 강태준의 말투가 아닌, 이전의 이정원의 목소리로 그에게 말을 건넸다. 박철민의 얼굴은 더욱 굳어졌다. \"오늘부터, 안전 관리자로 일하게 됐습니다.\""
      ],
      "choices": [
        {
          "text": "박철민의 반응을 살피며, 그의 약점을 파고든다.",
          "next_node": "chapter_2"
        },
        {
          "text": "곧바로 현장 안전 점검을 시작한다. 미흡한 부분을 지적한다.",
          "next_node": "chapter_2"
        }
      ]
    },
    "chapter_2": {
      "title": "3장: 과거의 그림자, 박철민의 등장",
      "image_prompt": "Close-up of Park Cheol-min, the construction site manager, looking pale and sweating profusely, with a mixture of fear and anger in his eyes, as he faces Kang Tae-joon (Lee Jung-won).",
      "image_url": "https://placehold.co/512x512/1f2937/d1d5db?text=Image+Generation+Failed\\nPrompt: Close-up%20of%20Park%20Cheol-min%2C%20the%20construction%20site%20manager%2C%20looking%20pale%20and%20sweating%20profusely%2C%20with%20a%20mixture%20of%20fear%20and%20anger%20in%20his%20eyes%2C%20as%20he%20faces%20Kang%20Tae-joon%20(Lee%20Jung-won).",
      "content": [
        "박철민 소장의 얼굴이 사색이 되는 걸 보니, 녀석도 뭔가 기는 게 있나 보군. '강태준'이라는 가면을 쓰고 있지만, 내 안의 '이정원'은 그 녀석의 과거를 꿰뚫어 보고 있었다. 과거, 내가 몸담았던 현장에서 발생했던 안전사고… 그때 녀석은 안전 관리 책임자였다. 흐지부지 덮였던 사고의 진실을, 나는 아직 기억하고 있다.",
        "\"박 소장님, 왜 그렇게 놀라십니까? 제가 안전 관리자로 온 게 그렇게 못마땅하신가요?\" 능글맞게 웃으며 물었다. 강태준 특유의 느끼한 미소를 지으니, 박철민은 더욱 안절부절못하는 표정을 지었다. 땀방울이 송골송골 맺힌 그의 이마를 보니, 슬슬 재미있어지기 시작했다.",
        "\"아, 아, 아니, 강… 아니, 이정원 씨. 그게 아니라… 갑자기 나타나셔서 놀랐을 뿐입니다. 워낙 이미지가 다르시니…\" 더듬거리는 그의 말투는 거짓말을 하고 있다는 걸 명백히 드러내고 있었다. 그래, 네가 감추고 있는 진실을, 이제 밝혀낼 때가 된 것 같다.",
        "\"이미지? 하긴, 예전의 낡은 안전모 대신, 이렇게 번듯한 얼굴로 나타났으니 놀랄 만도 하겠죠. 하지만 박 소장님, 겉모습만 보고 판단하면 안 됩니다. 사람은 쉽게 변하지 않거든요. 특히, 과거에 저지른 잘못은… 평생 따라다니는 법이죠.\"",
        "나지막이 읊조리는 내 말에, 박철민은 완전히 굳어버렸다. 그의 눈동자는 심하게 흔들리고 있었다. 그때, 그의 핸드폰이 요란하게 울리기 시작했다. 발신인은 '회장님'이었다."
      ],
      "choices": [
        {
          "text": "전화를 받으려는 박철민을 막고, 먼저 회장과의 관계를 추궁한다.",
          "next_node": "chapter_3"
        },
        {
          "text": "박철민이 전화를 받는 동안, 그의 표정을 살피며 속내를 파악한다.",
          "next_node": "chapter_3"
        },
        {
          "text": "현장 점검을 핑계로 자리를 비운 뒤, 그의 뒤를 몰래 밟는다.",
          "next_node": "chapter_3"
        }
      ]
    },
    "chapter_3": {
      "title": "4장: 서주희와의 운명적인 만남",
      "image_prompt": "Kang Tae-joon (Lee Jung-won) accidentally bumps into Seo Joo-hee at the construction site, scattering her design blueprints. Close-up on their surprised faces, with a hint of romantic tension.",
      "image_url": "https://placehold.co/512x512/1f2937/d1d5db?text=Image+Generation+Failed\\nPrompt: Kang%20Tae-joon%20(Lee%20Jung-won)%20accidentally%20bumps%20into%20Seo%20Joo-hee%20at%20the%20construction%20site%2C%20scattering%20her%20design%20blueprints.%20Close-up%20on%20their%20surprised%20faces%2C%20with%20a%20hint%20of%20romantic%20tension.",
      "content": [
        "회장과의 통화를 위해 허둥지둥 자리를 피하는 박철민을 뒤로하고, 나는 일부러 현장 사무실을 나섰다. 어차피 녀석에게선 지금 당장 원하는 답을 얻을 수 없다는 걸 알고 있었다. 중요한 건, 그 녀석이 얼마나 궁지에 몰렸는지 확인했다는 사실이다. 이제부터 천천히 조여 가면 된다.",
        "사무실 문을 나서자, 햇살이 쏟아졌다. 눈을 가늘게 뜨며 현장을 둘러보던 중, 누군가와 ‘쾅’하고 부딪혔다. 젠장, 앞을 제대로 안 보고 다녔나. “아, 죄송합니다!” 당황한 목소리가 들려왔다. 고개를 들어보니, 며칠 전 내 시선을 사로잡았던 서주희였다.",
        "그녀는 잔뜩 구겨진 설계 도면들을 허둥지둥 주워 담고 있었다. “제가 더 죄송해요. 앞을 제대로 안 보고…” 나도 함께 도면을 줍기 시작했다. 가까이서 보니, 그녀의 얼굴은 더욱 앳되고 순수해 보였다. 순간, 그녀의 손등에 살짝 스쳤다. 묘한 전류가 흐르는 듯한 느낌.",
        "“괜찮으세요?” 걱정스러운 눈빛으로 나를 바라보는 그녀에게, 나는 어색하게 미소 지었다. “네, 괜찮습니다. 그런데… 이 도면, 혹시 이번 프로젝트와 관련된 건가요?” 일부러 화제를 돌렸다. 왠지 모르게, 그녀와 더 많은 이야기를 나누고 싶었다.",
        "서주희는 살짝 망설이더니, 조심스럽게 입을 열었다. \"네, 맞아요. 제가 이번 프로젝트의 디자인을 맡게 됐거든요. 그런데… 솔직히 말씀드리면, 현실적인 문제 때문에 디자인을 많이 수정해야 할 것 같아요. 안전 문제도 그렇고요…\" 그녀의 눈빛에는 꿈을 향한 열정과 현실의 벽 사이에서 느끼는 갈등이 고스란히 드러나 있었다. 마치 예전의 내 모습을 보는 것 같았다. 그때, 그녀의 시선이 내 안전모에 고정되었다. “어… 혹시, 안전관리자분이세요?”"
      ],
      "choices": [
        {
          "text": "그녀에게 솔직하게 안전에 대한 자신의 생각을 이야기하며, 그녀의 디자인을 지지한다.",
          "next_node": "chapter_4"
        },
        {
          "text": "안전 문제에 대한 그녀의 고충을 듣고, 박철민 소장의 비리를 은근슬쩍 흘린다.",
          "next_node": "chapter_4"
        },
        {
          "text": "일단 그녀의 연락처를 확보하고, 다음에 다시 이야기하자고 한다.",
          "next_node": "chapter_4"
        }
      ]
    },
    "chapter_4": {
      "title": "5장: 안전 불감증과의 전쟁 선포",
      "image_prompt": "Lee Jung-won (as Kang Tae-joon) stands on a construction site overlooking the workers, with a determined look on his face. In the background, subtle signs of safety violations are visible.",
      "image_url": "https://placehold.co/512x512/1f2937/d1d5db?text=Image+Generation+Failed\\nPrompt: Lee%20Jung-won%20(as%20Kang%20Tae-joon)%20stands%20on%20a%20construction%20site%20overlooking%20the%20workers%2C%20with%20a%20determined%20look%20on%20his%20face.%20In%20the%20background%2C%20subtle%20signs%20of%20safety%20violations%20are%20visible.",
      "content": [
        "서주희 씨의 마지막 말이 머릿속에서 떠나질 않았다. '안전 문제도 그렇고요…' 그래, 결국 모든 건 안전으로 귀결된다. 과거의 내가 그토록 지키고 싶었던, 그리고 지켜내지 못했던 바로 그것. 강태준으로서의 새로운 삶, 어쩌면 내게 주어진 두 번째 기회인지도 모른다. 안전 불감증에 젖어있는 이 현장을, 반드시 바꿔놓겠어.",
        "다음 날 아침, 나는 안전모를 더욱 깊숙이 눌러쓰고 현장을 샅샅이 누볐다. 박철민 그 자식, 회장과의 통화 이후로 더욱 날카로워진 눈빛으로 나를 감시하고 있었다. 흥, 감시하든 말든. 나는 내 할 일을 할 뿐이다. 여기저기 널브러진 안전 장비, 제대로 고정되지 않은 비계, 보호망 하나 없이 아슬아슬하게 작업하는 인부들… 눈에 보이는 모든 안전 위반 사항들을 꼼꼼하게 기록했다.",
        "점심시간, 식당에서 밥을 먹던 중 서주희 씨와 다시 마주쳤다. 그녀는 내게 어색하게 인사를 건넸고, 나는 그녀의 옆자리에 앉아 함께 식사를 했다. \"어제 말씀하신 디자인 문제, 혹시 더 자세히 여쭤봐도 될까요? 제가 혹시 도움이 될 수도 있을 것 같아서요.\" 그녀의 눈이 살짝 커졌다. 예상치 못한 나의 관심에 놀란 듯했다.",
        "서주희 씨는 쭈뼛거리면서도 자신의 디자인에 대한 이야기를 꺼내기 시작했다. 그녀의 디자인은 아름다웠지만, 현실적인 안전 문제를 간과한 부분이 많았다. 나는 이전 생의 경험을 바탕으로 그녀에게 현실적인 조언들을 해주었고, 그녀는 놀라울 정도로 빠르게 나의 의견을 흡수했다. 대화가 무르익을수록, 우리는 서로에게 점점 더 빠져드는 것을 느낄 수 있었다.",
        "그때, 식당 문이 거칠게 열리며 박철민 소장이 들이닥쳤다. 그의 얼굴은 분노로 일그러져 있었다. \"강태준! 너 지금 뭐 하는 짓이야! 감히 내 현장에서…!\" 그의 고함 소리에 식당 안의 모든 시선이 우리에게 집중되었다. 순간, 나는 결심했다. 이제 더 이상 물러설 곳은 없다. 안전 불감증과의 전쟁을 선포할 때가 온 것이다."
      ],
      "choices": [
        {
          "text": "박철민에게 정면으로 맞서, 그의 비리를 폭로한다.",
          "next_node": "chapter_5"
        },
        {
          "text": "일단은 상황을 모면하고, 서주희와 함께 안전 문제를 해결할 방법을 모색한다.",
          "next_node": "chapter_5"
        },
        {
          "text": "침착하게 박철민을 설득하며, 안전을 최우선으로 하는 현장을 만들자고 제안한다.",
          "next_node": "chapter_5"
        }
      ]
    },
    "chapter_5": {
      "title": "6장: 위험 속에서 피어나는 사랑",
      "image_prompt": "Kang Tae-joon (Lee Jung-won) stands up from the lunch table, facing Park Cheol-min with a determined gaze while 서주희 looks on with concern. Other construction workers watch the scene unfold.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/92ffac30-6011-4c4c-9f1b-5c735db93729/main_story/chapter_5-1753229227163.png",
      "content": [
        "“강태준! 너 지금 뭐 하는 짓이야! 감히 내 현장에서…!” 박철민의 고함 소리에 숟가락 놓는 소리, 수다 소리, 모든 소리가 멎었다. 시선은 일제히 나와 박철민에게 꽂혔다. 심장이 쿵쾅거렸다. 이전 생의 기억이 파노라마처럼 스쳐 지나갔다. 그래, 이런 상황, 익숙하다 못해 지긋지긋했지.",
        "나는 천천히 자리에서 일어섰다. 서주희 씨가 걱정스러운 눈빛으로 나를 바라보고 있었다. 괜찮다는 듯 살짝 미소 지어 보였다. “무슨 짓이냐니요, 소장님. 당연히 안전 점검을 하고 있었죠. 소장님도 잘 아시겠지만, 이 현장은 안전 불감증이 심각합니다. 묵과할 수 없는 수준이에요.” 내 목소리는 차분했지만, 단호함이 묻어났다.",
        "박철민의 얼굴이 더욱 붉어졌다. “뭐? 안전 불감증? 웃기지 마! 다 잘 돌아가고 있는데 네놈이 괜히 트집 잡는 거 아니야? 회장님께 다 이를 거야!” 그는 손가락질하며 악을 썼다. 그의 모습은 마치 벼랑 끝에 몰린 짐승 같았다. 아니, 어쩌면 정말 벼랑 끝에 몰린 건지도 모르지.",
        "나는 그의 손가락을 붙잡았다. “소장님, 회장님께 이르는 건 자유입니다. 하지만 저는 제 할 일을 할 뿐입니다. 그리고 회장님도 안전을 소홀히 여기시는 분은 아니라고 생각합니다.” 나는 그의 눈을 똑바로 쳐다보며 말했다. 그의 눈동자가 심하게 흔들리고 있었다.",
        "그때, 서주희 씨가 조용히 입을 열었다. \"저도 강태준 씨 의견에 동의해요. 현장 곳곳에 위험 요소들이 너무 많아요. 디자인을 아무리 예쁘게 해도, 안전이 확보되지 않으면 아무 의미 없잖아요.\" 그녀의 한마디는 예상치 못한 파장을 불러일으켰다. 순간, 박철민의 얼굴에서 핏기가 사라졌다."
      ],
      "choices": [
        {
          "text": "박철민의 비리를 낱낱이 폭로하고, 서주희와 함께 현장 안전을 위한 혁신을 주도한다.",
          "next_node": "chapter_6"
        },
        {
          "text": "일단 박철민을 진정시키고, 회유와 협력을 통해 안전 시스템을 개선해 나간다.",
          "next_node": "chapter_6"
        },
        {
          "text": "서주희에게 솔직한 마음을 고백하고, 그녀와 함께 안전한 현장을 만들어갈 것을 약속한다.",
          "next_node": "chapter_6"
        }
      ]
    },
    "chapter_6": {
      "title": "7장: 숨겨진 진실, 그리고 음모",
      "image_prompt": "Lee Jung-won (Kang Tae-joon) secretly investigates Park Cheol-min's office at night, finding suspicious documents while 서주희 waits anxiously outside, looking around.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/92ffac30-6011-4c4c-9f1b-5c735db93729/main_story/chapter_6-1753229247511.png",
      "content": [
        "주희 씨의 예상치 못한 지지 발언에 박철민의 얼굴은 사색이 되었다. 그 틈을 타 나는 그에게서 손을 놓고 뒤로 물러섰다. 더 이상 정면충돌은 의미가 없었다. 이제 필요한 건 증거였다. 녀석이 감추고 있는 비리의 증거. 나는 속으로 다짐했다. 반드시 찾아내서 이 건설 현장을 안전하게 바꿔놓겠다고.",
        "점심시간 이후, 나는 몰래 박철민의 사무실을 염탐했다. 굳게 닫힌 문, 굳은 표정으로 전화를 받는 그의 모습. 분명 뭔가 숨기고 있었다. 퇴근 시간이 되자, 그는 서둘러 사무실을 나섰다. 나는 주희 씨에게 문자를 보냈다. '오늘 밤, 소장실에 같이 가요.' 잠시 후, 답장이 왔다. '알았어요. 위험한 일은 하지 말아요.'",
        "밤 11시. 주희 씨와 나는 어둠을 틈타 건설 현장으로 향했다. 경비실을 피해 조심스럽게 소장실로 접근했다. 주희 씨는 밖에서 망을 보고, 나는 문을 따고 안으로 들어갔다. 서류 더미, 컴퓨터, 그리고 술 냄새. 녀석의 흔적이 가득한 공간이었다. 나는 책상 서랍부터 샅샅이 뒤지기 시작했다.",
        "몇 시간 동안 샅샅이 뒤진 결과, 드디어 수상한 파일을 발견했다. '안전 관리 비용 축소 보고서'. 보고서에는 안전 장비 구입 비용을 대폭 삭감하고, 그 돈을 다른 곳에 사용했다는 내용이 적혀 있었다. 녀석은 돈에 눈이 멀어 안전을 팔아넘긴 것이다. 분노가 끓어올랐다. 바로 그때, 밖에서 주희 씨의 다급한 목소리가 들려왔다. \"태준 씨! 누군가 오고 있어요!\"",
        "나는 서둘러 보고서를 챙겨 책상 밑에 숨었다. 덜컹, 문이 열리는 소리가 들렸다. 희미한 불빛 아래 박철민의 그림자가 나타났다. 그는 술에 취한 듯 비틀거리며 사무실 안으로 들어왔다. \"젠장, 그 녀석들이 진짜로 감사를 나올 줄이야… 다 망했어!\" 그의 중얼거림에 나는 숨을 죽였다. 그런데, 그의 손에는 낯선 USB 드라이브가 들려 있었다. '회장님께 전달할 최종 보고서'라고 적혀 있었다. 뭔가 더 큰 음모가 도사리고 있다는 것을 직감했다."
      ],
      "choices": [
        {
          "text": "박철민이 USB 드라이브를 컴퓨터에 꽂는 순간을 틈타 덮친다.",
          "next_node": "chapter_7"
        },
        {
          "text": "일단 상황을 지켜보며 USB 드라이브에 담긴 내용을 파악한다.",
          "next_node": "chapter_7"
        }
      ]
    },
    "chapter_7": {
      "title": "8장: 태준, 위기를 기회로 만들다",
      "image_prompt": "Lee Jung-won (Kang Tae-joon) hides under the desk, observing Park Cheol-min plugging a USB drive into the computer in a dimly lit office, 서주희 anxiously peeking through the door.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/92ffac30-6011-4c4c-9f1b-5c735db93729/main_story/chapter_7-1753229262004.png",
      "content": [
        "심장이 쿵쾅거렸다. 술에 취한 박철민의 눈은 풀려 있었지만, 그의 손은 USB 드라이브를 꽂기 위해 필사적으로 움직였다. '회장님께 전달할 최종 보고서'라니. 도대체 무슨 내용이 담겨 있는 걸까? 감사를 앞두고 회장에게 보고할 내용이라면, 분명 이 건설 현장의 비리와 관련된 더 큰 그림이 그려져 있을 것이다. 나는 숨을 죽이고 그의 다음 행동을 주시했다.",
        "박철민이 USB 드라이브를 컴퓨터에 꽂았다. 화면이 켜지고, 폴더 몇 개가 떴다. 그는 마우스를 움직여 '최종_보고.exe' 파일을 실행시키려 했다. 지금이야! 놈이 파일을 실행시키는 순간, 모든 진실이 묻힐지도 모른다. 하지만섣불리 움직였다간 주희 씨까지 위험해질 수 있다. 짧은 순간, 수많은 생각들이 머릿속을 스쳐 지나갔다.",
        "나는 이를 악물었다. 지금은 위험을 감수해야 할 때였다. 안전 불감증으로 고통받는 사람들을 더 이상 외면할 수 없었다. 망설일 틈도 없이, 나는 책상 밑에서 뛰쳐나와 박철민에게 달려들었다. \"거기까지다, 박철민!\"",
        "\"네 놈이 무슨 짓을…!\" 박철민은 술에 취한 와중에도 당황한 표정을 감추지 못했다. 나는 그의 손에서 USB 드라이브를 빼앗으려 했지만, 그는 완강히 저항했다. 몸싸움이 벌어졌다. 좁은 사무실 안에서 우리는 엉켜 넘어지고 부딪혔다. 그러다 박철민의 손에 들린 USB 드라이브가 공중으로 솟구쳐 올랐다.",
        "USB 드라이브는 포물선을 그리며 날아갔고, 나는 본능적으로 손을 뻗어 그것을 잡으려 했다. 하지만, 아쉽게도 내 손은 닿지 못했다. USB 드라이브는 그대로 바닥에 떨어져 산산이 부서졌다. 박철민은 넋이 나간 표정으로 부서진 USB 드라이브를 바라봤다. 나는 주희 씨를 향해 고갯짓을 했다. 이제부터가 진짜 시작이었다."
      ],
      "choices": [
        {
          "text": "부서진 USB 드라이브를 뒤로하고 박철민을 경찰에 넘긴다.",
          "next_node": "chapter_8"
        },
        {
          "text": "혹시 모를 복사본을 찾아 사무실을 다시 수색한다.",
          "next_node": "chapter_8"
        }
      ]
    }
  },
  "currentStep": 8,
  "gameplay": {
    "fontSize": 1.125
  },
  "ui": {
    "isLoading": false,
    "statusText": "모든 챕터 생성이 완료되었습니다!"
  }
};
    let gameState = { currentNodeKey: 'chapter_0', currentPage: 0, currentNodeObject: null };
    let settings = storyData.gameplay || { fontSize: 1.125 };

    document.addEventListener('DOMContentLoaded', () => {
        showNode('chapter_0');
    });

    function showNode(nodeKey) {
        const gameContainer = document.getElementById('game-container');
        if (!nodeKey || !storyData.story[nodeKey]) {
            gameContainer.innerHTML = `<div class="absolute inset-0 flex flex-col items-center justify-center p-8 text-center bg-black">
                    <h1 class="text-3xl font-bold mb-4">The End</h1>
                    <p class="text-xl text-gray-300">이야기가 끝났습니다. 플레이해주셔서 감사합니다.</p>
                </div>`;
            return;
        }
        gameState.currentNodeKey = nodeKey;
        gameState.currentNodeObject = storyData.story[nodeKey];
        gameState.currentPage = 0;
        renderPage();
    }

    function renderPage() {
        const gameContainer = document.getElementById('game-container');
        const node = gameState.currentNodeObject;
        if (!node || !node.content) return;

        const pageContent = node.content[gameState.currentPage];
        const isLastPage = gameState.currentPage >= node.content.length - 1;

        let choicesHTML = '';
        if (isLastPage) {
            choicesHTML = '<div class="mt-8 space-y-4 w-full max-w-2xl fade-in">';
            node.choices.forEach(choice => {
                choicesHTML += `<button class="choice-button w-full text-left p-4 rounded-lg text-lg" onclick="showNode('${choice.next_node}')">${choice.text}</button>`;
            });
            choicesHTML += '</div>';
        }

        gameContainer.innerHTML = `
            <div class="absolute inset-0 bg-cover bg-center transition-opacity duration-1000" style="background-image: url('${node.image_url}');"></div>
            <div class="absolute inset-0 bg-black bg-opacity-50 vignette-overlay"></div>
            <div class="relative w-full h-full flex flex-col justify-end items-center p-4 sm:p-8 pb-16">
                <div class="w-full max-w-4xl text-center mb-8 fade-in">
                    <p id="game-text" class="game-text-shadow text-lg sm:text-xl md:text-2xl leading-relaxed" style="font-size: ${settings.fontSize}rem;">${pageContent}</p>
                </div>
                ${choicesHTML}
                <div class="absolute bottom-4 right-4 flex space-x-2">
                    ${gameState.currentPage > 0 ? '<button id="prev-btn" class="nav-button rounded-full p-2 bg-black/30"><i data-lucide="chevron-left"></i></button>' : ''}
                    ${!isLastPage ? '<button id="next-btn" class="nav-button rounded-full p-2 bg-black/30"><i data-lucide="chevron-right"></i></button>' : ''}
                </div>
                <div class="absolute bottom-4 left-4 text-white/50 text-sm">${gameState.currentPage + 1} / ${node.content.length}</div>
            </div>`;
        
        if (typeof lucide !== 'undefined') lucide.createIcons();

        if (!isLastPage) {
            document.getElementById('next-btn')?.addEventListener('click', handleNextPage);
        }
        document.getElementById('prev-btn')?.addEventListener('click', handlePrevPage);
    }

    function handleNextPage() {
        if (gameState.currentPage < gameState.currentNodeObject.content.length - 1) {
            gameState.currentPage++;
            renderPage();
        }
    }
    function handlePrevPage() {
        if (gameState.currentPage > 0) {
            gameState.currentPage--;
            renderPage();
        }
    }
</script>
</body>
</html>