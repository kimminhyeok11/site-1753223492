<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>무림맹주 이정원, 현대인의 좌충우돌 무림 정복기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .vignette-overlay { background: linear-gradient(to bottom, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0) 25%, rgba(0,0,0,0) 60%, rgba(0,0,0,0.9) 100%); }
        .game-text-shadow { text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9); }
        .choice-button { transition: all 0.2s ease; background-color: rgba(17, 24, 39, 0.7); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .choice-button:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); background-color: rgba(31, 41, 55, 0.9); }
        .nav-button { transition: background-color 0.2s ease; } .nav-button:hover { background-color: rgba(255, 255, 255, 0.2); }
        .fade-in { animation: fadeIn 0.5s ease-in-out; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-black text-white">
    <div id="game-container" class="relative w-full h-screen overflow-hidden"></div>
<script>
    const storyData = {
  "title": "무림맹주 이정원, 현대인의 좌충우돌 무림 정복기",
  "setting": "고대 무협 세계와 현대 사회의 지식이 혼합된 퓨전 무협 세계. 무림맹을 중심으로 강호가 유지되지만, 암투와 음모가 끊이지 않는다.",
  "synopsis": "평범한 현대 직장인 이정원은 우연히 얻은 고대의 비급을 통해 무림 세계로 차원이동한다. 얼떨결에 무림맹주가 된 그는 현대인의 합리적인 사고방식과 뛰어난 사업 감각으로 무림을 혁신하려 하지만, 전통적인 무림의 관습과 끊임없이 충돌하며 좌충우돌 성장해 나간다.",
  "ending": "이정원은 무림맹을 성공적으로 혁신하고, 무림의 평화를 가져오며, 동시에 자신의 현대적인 가치관을 무림에 성공적으로 정착시킨다. 그는 무림과 현대 사회를 잇는 가교 역할을 하며 새로운 시대의 맹주로 거듭난다.",
  "characters": [
    {
      "name": "이정원",
      "role": "player",
      "description": "현대 사회에서 평범한 직장인이었으나, 무림 세계로 차원이동 후 무림맹주가 된다. 합리적이고 효율적인 사고방식을 가지고 있으며, 사업 감각이 뛰어나다. 때로는 어리숙하지만, 정의감 넘치는 성격.",
      "status": "무림맹의 위기에 직면, 결단력 상승"
    },
    {
      "name": "묵향",
      "role": "main",
      "description": "무림맹의 고수이자 이정원을 보좌하는 냉철한 미녀 검사. 뛰어난 무공 실력과 판단력을 지녔지만, 현대인의 사고방식을 이해하지 못해 이정원과 자주 충돌한다.",
      "status": "속내를 더욱 숨김, 의심스러운 행보"
    },
    {
      "name": "장삼봉",
      "role": "supporting",
      "description": "무림의 원로이자 덕망 높은 도사. 이정원의 기발한 아이디어에 흥미를 느끼고 물심양면으로 돕는다. 해박한 지식과 뛰어난 통찰력을 지녔다.",
      "status": "이정원에 대한 믿음 증가, 무림의 미래에 대한 희망을 품음"
    },
    {
      "name": "마교 교주",
      "role": "supporting",
      "description": "무림을 혼란에 빠뜨리려는 야심가. 겉으로는 온화하지만, 속으로는 냉혹하고 잔인하다. 이정원의 혁신적인 정책을 방해하며 끊임없이 위협을 가한다.",
      "status": "이정원에 대한 흥미 증가, 묵향 견제"
    }
  ],
  "plan": [
    "1장: 운명적인 만남 - 차원이동과 무림맹주 즉위",
    "2장: 현대인의 시각 - 무림맹 개혁의 시작",
    "3장: 첫 번째 난관 - 고수들의 반발과 암투",
    "4장: 사업 수완 발휘 - 상업을 통한 무림 재건",
    "5장: 묵향과의 갈등 - 이해와 협력의 시작",
    "6장: 마교의 등장 - 새로운 위협의 그림자",
    "7장: 장삼봉의 도움 - 고수와의 만남과 가르침",
    "8장: 무림맹의 위기 - 마교의 음모와 함정"
  ],
  "story": {
    "chapter_0": {
      "title": "1장: 운명적인 만남 - 차원이동과 무림맹주 즉위",
      "image_prompt": "A bewildered man in a modern suit stands in the middle of a grand hall filled with people in traditional martial arts attire. Banners with ancient symbols hang from the ceiling, and a wizened old man with a long white beard looks at him with a curious expression.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_0-1753226875270.png",
      "content": [
        "눈을 떴을 때는 낯선 천장이 보였다. 아니, 천장이라기보다는 거대한 홀의 웅장한 지붕이라고 해야 할까. 온통 처음 보는 복장을 한 사람들이 나를 둘러싸고 있었고, 그들의 시선은 하나같이 당혹스러움과 경계심으로 가득 차 있었다. 어쩌다 내가 이런 곳에...?",
        "혼란스러운 와중에 가장 먼저 눈에 들어온 것은 백발이 성성한 노인이었다. 그는 마치 오래된 책에서 튀어나온 듯한 도포를 입고 있었고, 온화하면서도 깊이를 알 수 없는 눈빛으로 나를 응시하고 있었다. 노인의 옆에는 차가운 눈빛을 한 아름다운 여인이 서 있었다. 그녀의 손에는 날카로운 검이 들려 있었다.",
        "노인이 나에게 다가와 정중하게 고개를 숙였다. \"이정원 맹주님, 드디어 깨어나셨군요. 부디 옥좌에 앉으시어 무림맹을 이끌어 주십시오.\" 맹주? 내가? 얼떨떨한 기분으로 옥좌라고 불리는 화려한 의자에 앉았다. 상황 파악도 제대로 되지 않은 채, 나는 졸지에 무림맹주가 되어 버린 것이다.",
        "그때, 홀의 문이 쾅 소리를 내며 열렸다. 붉은색과 검은색이 뒤섞인 기괴한 복장을 한 무리가 몰려 들어왔고, 그들의 선두에는 험악한 인상의 남자가 서 있었다. \"무림맹주라… 하! 풋내기 녀석이 감히 무림을 이끌겠다고? 오늘 여기서 네놈의 목을 베어 마교의 위엄을 떨치리라!\"",
        "마교 교주의 등장에 홀 안은 순식간에 긴장감으로 가득 찼다. 묵향이라 불린 여인은 즉시 검을 뽑아 들었고, 장삼봉이라 불린 노인은 가볍게 한숨을 쉬었다. 하지만 나는 아직까지도 상황 파악이 되지 않았다. 싸워야 하는 건가? 도망쳐야 하는 건가? 아니, 그보다… 대체 뭘 해야 하는 거지?"
      ],
      "choices": [
        {
          "text": "\"잠깐! 이야기는 좀 하고 싸우자!\"",
          "next_node": "chapter_1"
        },
        {
          "text": "\"무림맹주고 뭐고, 난 집에 갈래!\"",
          "next_node": "chapter_1"
        }
      ]
    },
    "chapter_1": {
      "title": "2장: 현대인의 시각 - 무림맹 개혁의 시작",
      "image_prompt": "A man in a modern suit, looking determined, stands on a platform addressing a crowd of martial artists. Some look skeptical, others curious. Banners with traditional symbols hang in the background, but a whiteboard with hastily drawn diagrams is also visible.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_1-1753226996521.png",
      "content": [
        "마교 교주의 험악한 얼굴을 보니, 농담이 아니라는 걸 깨달았다. 하지만 칼부터 뽑아 드는 저 무식한 방법으로는 답이 없다. \"잠깐! 이야기는 좀 하고 싸우자!\" 나는 다급하게 외쳤다. 일단 시간을 벌어야 한다. 머릿속은 쉴 새 없이 돌아가고 있었다. 현대 사회에서 갈고 닦은 협상 스킬을 여기서 써먹을 때가 온 건가?",
        "내 갑작스러운 외침에 모두의 시선이 집중됐다. 마교 교주조차 흥미로운 듯 팔짱을 끼고 나를 바라봤다. \"풋, 이야기는 무슨… 네놈이 무슨 꿍꿍이를 부리든 소용없다!\" 그의 말에 나는 태연하게 대꾸했다. \"싸워서 얻는 것보다, 이야기로 얻는 게 더 많을 수도 있지 않겠습니까? 예를 들면… 평화라던가, 상호 이익이라던가?\"",
        "나는 즉석에서 무림맹과 마교 간의 '상호 협력'이라는 개념을 제시했다. 솔직히 말해서, 무협지에 나오는 마교는 답이 없는 악당 집단인 줄 알았지만… 일단 꼬드겨보는 거다! \"서로의 영역을 존중하고, 부족한 물자를 교역하며, 필요하다면 공동의 적에 맞서 싸우는 겁니다!\" 뜬구름 잡는 소리처럼 들릴 수도 있겠지만, 묵향의 표정이 미묘하게 변하는 것을 느낄 수 있었다.",
        "장삼봉 역시 흥미로운 눈빛으로 나를 바라보고 있었다. 하지만 마교 교주는 여전히 냉소적인 표정이었다. \"흥, 고작 말 몇 마디로 나를 속일 수 있다고 생각하나? 좋아, 네놈의 그 허황된 '협력'이란 게 대체 뭔지 한번 들어보자. 단, 날 설득시키지 못하면… 각오하는 게 좋을 거다!\"",
        "나는 숨을 크게 쉬고, 내가 구상하고 있던 무림맹의 혁신 계획을 꺼내 들었다. 무림맹을 현대적인 시스템으로 재정비하고, 효율적인 자원 관리와 인재 육성을 통해… 아니, 잠깐. 이 모든 걸 설명하기 전에, 먼저 해야 할 일이 떠올랐다. 낡아빠진 맹주의 권위를 상징하는 옥좌부터 바꿔야 한다! \"그 전에, 저 불편해 보이는 의자부터 치워주시죠. 허리 나갈 것 같습니다.\""
      ],
      "choices": [
        {
          "text": "\"모두 제 말을 따르세요! 무림맹 개혁, 지금부터 시작합니다!\"",
          "next_node": "chapter_2"
        },
        {
          "text": "\"일단… 묵향 씨, 저 의자 좀 치워줄래요?\"",
          "next_node": "chapter_2"
        }
      ]
    },
    "chapter_2": {
      "title": "3장: 첫 번째 난관 - 고수들의 반발과 암투",
      "image_prompt": "A grand hall in the martial arts alliance headquarters. Martial artists are arguing and gesturing wildly. In the center, the protagonist stands on the replaced modern office chair, looking exasperated but determined. Some martial artists look angry, others confused.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_2-1753227012605.png",
      "content": [
        "옥좌를 치우라는 내 말에 장내는 순간 정적에 휩싸였다. 마교 교주는 껄껄 웃어댔고, 장삼봉 도장은 껄끄러운 표정으로 턱수염을 쓰다듬었다. 하지만 진짜 문제는 다른 데 있었다. 맹주의 권위를 상징하는 옥좌를 치우라니? 전통을 무시하는 처사라며, 여기저기서 불만의 목소리가 터져 나오기 시작한 것이다.",
        "\"맹주께서 무림의 오랜 전통을 너무 가볍게 여기시는 것 아니오!\" 한 중년 무인이 격앙된 목소리로 외쳤다. 그러자 다른 무인들도 하나둘씩 불만을 쏟아내기 시작했다. '옥좌는 무림맹의 상징이다!', '저런 현대적인 의자는 맹주의 위엄을 떨어뜨린다!', '저자는 무림을 모욕하고 있다!' 아, 망했다. 시작부터 암초에 부딪힌 건가.",
        "나는 애써 침착하게 해명했다. \"여러분, 오해입니다! 옥좌가 불편해서 그랬을 뿐, 다른 뜻은 없습니다. 그리고… 효율성을 생각하면 저 의자가 훨씬 편합니다! 허리 건강에도 좋고요!\" 하지만 그들의 귀에는 내 말이 제대로 들리지 않는 듯했다. 오히려 반발심만 더 키운 꼴이 됐다. 묵향은 흥미롭다는 듯 입가에 미소를 띠고 있었고, 마교 교주는 비웃음을 흘리고 있었다.",
        "장삼봉 도장이 나서서 중재하려 했지만, 역부족이었다. 분위기는 점점 험악해져 갔고, 칼을 뽑아 들 기세로 덤벼드는 무인들도 있었다. 이대로 가다간 정말 큰 싸움이 벌어질지도 모른다. 뭔가 특단의 조치가 필요하다. 하지만 뭘 해야 할까? 무력으로 제압하는 건 최악의 선택이고, 설득은 이미 실패했다.",
        "그때, 한 가지 기발한 아이디어가 떠올랐다. 그래, 어차피 이렇게 된 거… 정면돌파다! 나는 자리에서 벌떡 일어나, 호탕하게 웃으며 외쳤다. \"좋습니다! 여러분의 의견을 존중하여, 맹주 자리를 걸고… 무공 시합을 하는 건 어떻습니까! 제가 여러분 모두를 이긴다면, 제 개혁 방안에 반대하지 않겠다는 맹세를 해주십시오!\""
      ],
      "choices": [
        {
          "text": "\"좋습니다! 맹주님의 제안을 받아들이죠!\" 시합을 받아들인다.",
          "next_node": "chapter_3"
        },
        {
          "text": "\"아, 역시 무공 시합은 좀… 다른 방법을 찾아봅시다.\" 설득을 시도한다.",
          "next_node": "chapter_3"
        }
      ]
    },
    "chapter_3": {
      "title": "4장: 사업 수완 발휘 - 상업을 통한 무림 재건",
      "image_prompt": "A bustling marketplace in a wuxia world, but with modern elements like stalls selling energy drinks and merchandise. Martial artists are bartering with merchants.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_3-1753227033124.png",
      "content": [
        "무공 시합 제안 이후, 장내는 술렁이기 시작했다. 마교 교주는 더욱 흥미로운 눈빛으로 나를 바라봤고, 장삼봉 도장은 걱정스러운 표정을 감추지 못했다. 묵향은 여전히 미소를 잃지 않았지만, 그 눈빛은 이전보다 훨씬 날카로워진 듯했다. 어쨌든 시간을 벌었다. 하지만… 솔직히 말해서, 나는 무공에는 젬병이다. 현대인의 몸으로 아무리 발버둥 쳐봤자, 내공 수십 년 쌓은 고수들을 이길 가능성은 희박하다.",
        "시합을 준비하는 척하면서, 나는 머리를 굴리기 시작했다. 무력으로 안 된다면, 다른 방법을 찾아야 한다. 그래, 내가 가장 잘하는 거… 사업이다! 무림맹의 재정을 튼튼하게 만들고, 그 이익을 무인들에게 돌려준다면, 자연스럽게 내 편이 늘어나겠지. 문제는 자금이다. 무림맹은 생각보다 훨씬 가난했다. 낡아빠진 건물, 훈련 시설 부족, 형편없는 복지… 이래서는 안 된다.",
        "나는 즉시 행동에 나섰다. 가장 먼저 시작한 것은 무림맹 주변의 황무지를 개간하는 일이었다. 농사를 지어 식량을 자급자족하고, 남는 것은 팔아서 돈을 벌 수 있다. 그리고 무림맹의 이름을 걸고 다양한 상품을 개발하기 시작했다. ‘맹주표 활력단’, ‘정원표 고급 검집’, ‘장삼봉 도장의 건강차’… 현대적인 마케팅 기법을 활용하여, 무림맹 상품의 브랜드 이미지를 높이는 데 주력했다. 물론, 무협 세계에선 생소한 개념이었지만, 나는 굴하지 않았다.",
        "처음에는 다들 시큰둥한 반응이었다. ‘맹주가 농사나 짓고 장사나 하다니… 쯧쯧.’ 하지만 시간이 지날수록 상황은 역전되기 시작했다. 황무지에서 수확한 곡물은 무림맹의 식량 문제를 해결했고, 무림맹 상품은 불티나게 팔려나가기 시작했다. 특히 ‘맹주표 활력단’은 지친 무인들의 필수품으로 자리 잡았다. 돈이 쌓이기 시작하자, 낡은 훈련 시설을 보수하고, 무인들의 복지를 개선하기 시작했다. 그러자 놀라운 일이 벌어졌다. 하나둘씩, 내 개혁 방안에 동조하는 무인들이 늘어나기 시작한 것이다.",
        "하지만 모든 것이 순조로운 것만은 아니었다. 무림맹의 상업화에 반감을 가진 세력도 분명히 존재했다. 특히 오랜 전통을 고수하는 문파들은 ‘무림은 돈에 물들어서는 안 된다’며 강하게 반발했다. 그리고… 마교에서도 심상치 않은 움직임이 포착되기 시작했다. 그들은 무림맹의 상업적인 성공을 경계하며, 새로운 음모를 꾸미고 있는 듯했다. 이대로 가다간, 또 다른 거대한 난관에 부딪힐지도 모른다… 그때, 묵향이 내 방으로 찾아왔다. 그녀는 의미심장한 미소를 지으며 말했다. \"맹주, 재미있는 제안이 하나 있습니다.\""
      ],
      "choices": [
        {
          "text": "\"무슨 제안이오?\"",
          "next_node": "chapter_4"
        },
        {
          "text": "\"됐소! 당신의 제안은 뻔하겠지!\"",
          "next_node": "chapter_4"
        }
      ]
    },
    "chapter_4": {
      "title": "5장: 묵향과의 갈등 - 이해와 협력의 시작",
      "image_prompt": "A tense meeting between I Jungwon and Mook Hyang in a dimly lit room. Mook Hyang is smirking, while I Jungwon looks wary and thoughtful.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_4-1753227051401.png",
      "content": [
        "묵향의 제안은 예상대로 위험했다. 마교와의 합작 투자. 그것도 무림맹 상품의 유통망을 공유하는 조건이었다. \"미친 짓이야!\" 나는 속으로 외쳤다. 마교는 숙적이다. 녀석들과 손을 잡는 건, 호랑이에게 제 발로 먹이를 주는 꼴과 다름없다.",
        "\"맹주께서는 너무 좁게 보시는군요.\" 묵향은 차가운 눈빛으로 나를 쏘아봤다. \"마교의 막강한 자금력과 유통망을 이용한다면, 무림맹의 사업은 더욱 확장될 수 있습니다. 물론, 위험 부담은 따르겠지만… 성공했을 때의 이득은 상상 이상일 겁니다.\"",
        "나는 묵향의 말을 곱씹었다. 그녀의 말대로, 마교와의 협력은 엄청난 기회가 될 수 있다. 하지만 동시에, 무림맹 전체가 마교의 손아귀에 놀아날 위험도 있다. 선택은 오롯이 내 몫이었다. 나는 잠시 눈을 감고 깊은 생각에 잠겼다. 지금껏 그래왔듯, 이번에도 도박을 해야 하는 걸까?",
        "침묵이 흐르는 방 안, 묵향은 초조한 듯 손가락으로 탁자를 두드렸다. 나는 천천히 입을 열었다. \"묵향, 당신은 왜 이런 제안을 하는 거요? 마교와 손을 잡는 것이 당신에게 어떤 이득이 있소?\"",
        "묵향은 잠시 당황한 듯 눈을 깜빡였다. 하지만 곧, 그녀는 다시 냉정한 표정을 되찾으며 대답했다. \"맹주께서는 아직 저를 완전히 믿지 못하시는군요. 좋습니다. 제 속내를 솔직하게 말씀드리죠…\" 그녀는 나를 똑바로 바라보며, 충격적인 진실을 털어놓기 시작했다."
      ],
      "choices": [
        {
          "text": "\"당신의 속내는 무엇이오?\"",
          "next_node": "chapter_5"
        },
        {
          "text": "\"됐소, 거래는 없던 걸로 합시다!\"",
          "next_node": "chapter_5"
        }
      ]
    },
    "chapter_5": {
      "title": "6장: 마교의 등장 - 새로운 위협의 그림자",
      "image_prompt": "I Jungwon standing in a tense standoff against the Ma Gyo leader in a dark, cavernous hall. Torches flicker, casting long shadows, and the air is thick with menace. Mook Hyang is observing the scene from the shadows, her expression unreadable.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_5-1753227079865.png",
      "content": [
        "묵향의 속내는… 결국 권력이었다. 그녀는 무림맹을 장악하고, 나아가 마교까지 손에 넣어 천하를 지배하려는 야망을 품고 있었다. 물론, 직접적으로 드러내진 않았지만, 그녀의 눈빛과 말투에서 그 욕망을 느낄 수 있었다. \"위험한 여자….\" 나는 속으로 중얼거렸다. 장삼봉 사형이 왜 그녀를 경계했는지 이제야 알 것 같았다.",
        "결국, 나는 마교와의 합작 투자를 받아들이기로 했다. 물론, 묵향의 계획대로 움직일 생각은 없었다. 오히려, 이 기회를 이용해 마교의 속내를 파악하고, 묵향의 야망을 저지할 계획이었다. 어쩌면, 이 모든 것은 묵향이 나를 시험하는 것일지도 모른다. 그녀는 내가 진정으로 무림맹을 이끌 자격이 있는지, 아니면 그저 꼭두각시에 불과한지 확인하고 싶어하는 것 같았다.",
        "며칠 후, 마교의 교주가 무림맹 본진에 도착했다. 그의 이름은 혈마(血魔). 붉은색 도포를 걸치고, 섬뜩한 미소를 짓는 그의 모습은 보는 것만으로도 소름이 돋았다. \"무림맹주, 이정원이라고 했나?\" 혈마는 거들먹거리는 태도로 내게 말을 걸었다. \"소문대로 풋내기 맹주로군. 과연 묵향의 기대에 부응할 수 있을지… 흥미롭군.\"",
        "혈마와의 만남은 살얼음판을 걷는 듯했다. 그는 끊임없이 나를 떠보며, 약점을 찾으려 애썼다. 묵향은 옆에서 침묵을 지키며, 우리의 대화를 지켜볼 뿐이었다. 마치, 두 마리의 맹수가 서로를 탐색하는 모습을 즐기는 듯했다. 나는 애써 침착함을 유지하며, 혈마의 도발에 맞섰다. 하지만, 그의 눈빛은 너무나 강렬했고, 나는 점점 더 불안해졌다.",
        "그때, 혈마가 갑자기 의미심장한 미소를 지으며 내게 은밀한 제안을 해왔다. \"이 맹주, 묵향을 조심하게. 그녀는 자네가 생각하는 것보다 훨씬 위험한 여자일지도 모르지… 나와 손을 잡는다면, 자네에게 천하를 주겠네.\" 그의 말에 나는 깊은 고민에 빠졌다. 과연 누구를 믿어야 하는 걸까? 묵향인가, 아니면 혈마인가…."
      ],
      "choices": [
        {
          "text": "\"묵향, 당신을 믿어야 할지, 혈마를 믿어야 할지 혼란스럽군요.\"",
          "next_node": "chapter_6"
        },
        {
          "text": "\"혈마, 당신의 제안… 흥미롭군요.\"",
          "next_node": "chapter_6"
        }
      ]
    },
    "chapter_6": {
      "title": "7장: 장삼봉의 도움 - 고수와의 만남과 가르침",
      "image_prompt": "I Jungwon sitting with Zhang Sanfeng in a serene mountain clearing, sunlight filtering through the leaves. Zhang Sanfeng is holding a teacup, his expression wise and compassionate. In the background, a waterfall cascades down a cliff.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_6-1753227162367.png",
      "content": [
        "혈마의 제안은 달콤했지만, 동시에 너무나 위험했다. 천하를 준다니. 그런 허황된 말을 쉽게 믿을 내가 아니었다. 묵향과 혈마, 둘 다 날 저울질하고 이용하려 든다. 이 상황을 타개할 실마리가 필요했다. 문득, 장삼봉 사형이 떠올랐다. 그는 욕심 없고, 올곧으며, 무엇보다 나를 진심으로 걱정해준다. 그의 지혜라면 이 미로 속에서 길을 찾을 수 있을지도 모른다.",
        "나는 조심스럽게 장삼봉 사형에게 묵향과 혈마에 대한 이야기를 털어놓았다. 사형은 묵묵히 내 말을 들어주었고, 그의 눈빛은 깊은 생각에 잠겨 있었다. \"정원아, 묵향은 뛰어난 재능을 가졌지만, 그 야망 또한 크다. 혈마는 겉으로는 호탕하지만, 속으로는 음흉한 계략을 품고 있지. 둘 다 쉽게 믿어서는 안 될 존재들이다.\"",
        "\"그럼 저는 어떻게 해야 할까요, 사형?\" 나는 절박한 심정으로 물었다. 장삼봉 사형은 잠시 침묵하더니, 나지막이 입을 열었다. \"정원아, 무림맹주는 무력만으로 되는 것이 아니다. 백성을 아끼고, 정의를 실현하며, 스스로의 마음을 다스릴 줄 알아야 한다. 네 안에 잠재된 힘을 깨워라. 그러면 해답이 보일 것이다.\"",
        "사형은 내게 심법의 기초를 가르쳐주기 시작했다. 현대의 지식과는 전혀 다른, 기를 다스리고 마음을 수련하는 방법이었다. 처음에는 낯설었지만, 꾸준히 수련하자 몸과 마음이 점차 안정되는 것을 느낄 수 있었다. 마치 오랫동안 굳어있던 뇌가 말랑말랑해지는 기분이었다. 며칠 밤낮으로 장삼봉 사형은 내게 무공과 심법을 전수했고, 나는 스승의 가르침을 스펀지처럼 흡수했다.",
        "어느덧 보름이라는 시간이 흘렀다. 나는 이전과는 비교할 수 없을 정도로 강해졌다. 하지만, 장삼봉 사형의 가르침은 단순히 무력의 강화에 그치지 않았다. 그는 내게 맹주로서 갖춰야 할 마음가짐, 세상을 바라보는 올바른 시각, 그리고 무엇보다 중요한 '선택'의 무게를 가르쳐주었다. \"이제, 네 스스로 선택할 때가 왔다.\" 장삼봉 사형은 의미심장한 눈빛으로 나를 바라보며 말했다. \"묵향과 혈마, 아니면...\""
      ],
      "choices": [
        {
          "text": "\"두 사람 모두를 쳐낼 방법을 찾아보겠습니다!\"",
          "next_node": "chapter_7"
        },
        {
          "text": "\"사형, 제가 진정으로 믿어야 할 사람은 누구입니까?\"",
          "next_node": "chapter_7"
        }
      ]
    },
    "chapter_7": {
      "title": "8장: 무림맹의 위기 - 마교의 음모와 함정",
      "image_prompt": "I Jungwon standing in the bustling 무림맹 headquarters, scrolls scattered on the table. He looks weary but determined, with a map highlighting suspicious activity near the 마교 border in the background. A shadowy figure lurks in the corner, partially obscured.",
      "image_url": "https://obbmtrxhmhokzvuxdqlc.supabase.co/storage/v1/object/public/images/cde49d09-275f-439d-86a0-1019fe71da5d/main_story/chapter_7-1753227226666.png",
      "content": [
        "장삼봉 사형의 가르침 덕분일까. 이전보다 훨씬 명료하게 상황이 보였다. 묵향은 여전히 속을 알 수 없지만, 그의 야망은 분명히 느껴진다. 혈마는 노골적으로 나를 흔들고 있고. 하지만 그보다 더 큰 문제가 눈앞에 닥쳐왔다. 마교의 움직임이 심상치 않다.",
        "최근 들어 마교의 소규모 습격이 부쩍 늘었다. 단순한 약탈이라고 보기엔 그 움직임이 조직적이고, 목표 지점도 수상하다. 마치 무림맹의 방어선을 떠보는 듯한 느낌이다. 불안한 예감은 점점 더 짙어졌다. 묵향은 이 사실을 알고 있을까? 그는 왜 침묵하는 거지?",
        "결국, 나는 묵향을 불러 마교의 움직임에 대해 물었다. 그는 특유의 냉정한 표정으로 대답했다. \"마교는 늘 문제를 일으키는 존재들이니 신경 쓸 필요 없습니다. 맹주께선 다른 일에 집중하시는 게 좋을 겁니다.\" 그의 대답은 어딘가 석연치 않았다. 오히려 무언가를 숨기고 있다는 인상을 받았다.",
        "며칠 후, 예상치 못한 보고가 올라왔다. 마교의 대규모 병력이 무림맹의 주요 거점을 향해 진격하고 있다는 것이다! 그것도 묵향이 담당하고 있는 지역을 중심으로 말이다. 함정이다. 묵향은 알고 있었을까, 아니면 그 역시 이용당하고 있는 걸까?",
        "나는 결단을 내려야 했다. 이대로 기다릴 것인가, 아니면 직접 움직여 함정을 파헤칠 것인가. 시간이 없다. 마교의 공격은 이미 시작되었고, 무림맹은 위기에 빠져있다. 나의 선택에 따라 무림의 운명이 결정될 것이다."
      ],
      "choices": [
        {
          "text": "\"묵향, 자네가 정말 몰랐단 말인가! 함께 마교를 막아섭시다!\"",
          "next_node": "chapter_8"
        },
        {
          "text": "\"마교의 함정을 역이용한다! 내가 직접 선봉에 서겠다!\"",
          "next_node": "chapter_8"
        },
        {
          "text": "\"장삼봉 사형께 도움을 요청한다. 지금은 그의 지혜가 필요해!\"",
          "next_node": "chapter_8"
        }
      ]
    }
  },
  "currentStep": 8,
  "gameplay": {
    "fontSize": 1.125
  },
  "ui": {
    "isLoading": false,
    "statusText": "챕터 8 이미지 생성 중..."
  }
};
    let gameState = { currentNodeKey: 'chapter_0', currentPage: 0, currentNodeObject: null };
    let settings = storyData.gameplay || { fontSize: 1.125 };

    document.addEventListener('DOMContentLoaded', () => {
        showNode('chapter_0');
    });

    function showNode(nodeKey) {
        const gameContainer = document.getElementById('game-container');
        if (!nodeKey || !storyData.story[nodeKey]) {
            gameContainer.innerHTML = `<div class="absolute inset-0 flex flex-col items-center justify-center p-8 text-center bg-black">
                    <h1 class="text-3xl font-bold mb-4">The End</h1>
                    <p class="text-xl text-gray-300">이야기가 끝났습니다. 플레이해주셔서 감사합니다.</p>
                </div>`;
            return;
        }
        gameState.currentNodeKey = nodeKey;
        gameState.currentNodeObject = storyData.story[nodeKey];
        gameState.currentPage = 0;
        renderPage();
    }

    function renderPage() {
        const gameContainer = document.getElementById('game-container');
        const node = gameState.currentNodeObject;
        if (!node || !node.content) return;

        const pageContent = node.content[gameState.currentPage];
        const isLastPage = gameState.currentPage >= node.content.length - 1;

        let choicesHTML = '';
        if (isLastPage) {
            choicesHTML = '<div class="mt-8 space-y-4 w-full max-w-2xl fade-in">';
            node.choices.forEach(choice => {
                choicesHTML += `<button class="choice-button w-full text-left p-4 rounded-lg text-lg" onclick="showNode('${choice.next_node}')">${choice.text}</button>`;
            });
            choicesHTML += '</div>';
        }

        gameContainer.innerHTML = `
            <div class="absolute inset-0 bg-cover bg-center transition-opacity duration-1000" style="background-image: url('${node.image_url}');"></div>
            <div class="absolute inset-0 bg-black bg-opacity-50 vignette-overlay"></div>
            <div class="relative w-full h-full flex flex-col justify-end items-center p-4 sm:p-8 pb-16">
                <div class="w-full max-w-4xl text-center mb-8 fade-in">
                    <p id="game-text" class="game-text-shadow text-lg sm:text-xl md:text-2xl leading-relaxed" style="font-size: ${settings.fontSize}rem;">${pageContent}</p>
                </div>
                ${choicesHTML}
                <div class="absolute bottom-4 right-4 flex space-x-2">
                    ${gameState.currentPage > 0 ? '<button id="prev-btn" class="nav-button rounded-full p-2 bg-black/30"><i data-lucide="chevron-left"></i></button>' : ''}
                    ${!isLastPage ? '<button id="next-btn" class="nav-button rounded-full p-2 bg-black/30"><i data-lucide="chevron-right"></i></button>' : ''}
                </div>
                <div class="absolute bottom-4 left-4 text-white/50 text-sm">${gameState.currentPage + 1} / ${node.content.length}</div>
            </div>`;
        
        if (typeof lucide !== 'undefined') lucide.createIcons();

        if (!isLastPage) {
            document.getElementById('next-btn')?.addEventListener('click', handleNextPage);
        }
        document.getElementById('prev-btn')?.addEventListener('click', handlePrevPage);
    }

    function handleNextPage() {
        if (gameState.currentPage < gameState.currentNodeObject.content.length - 1) {
            gameState.currentPage++;
            renderPage();
        }
    }
    function handlePrevPage() {
        if (gameState.currentPage > 0) {
            gameState.currentPage--;
            renderPage();
        }
    }
</script>
</body>
</html>